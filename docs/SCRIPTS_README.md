# 🚀 智能反向代理平台 - 启动脚本使用指南

## 📁 脚本文件结构

```
项目根目录/
├── manage.sh                   # 🎯 统一启动管理脚本（主要使用）
├── .env                        # ⚙️  配置文件（你只需要管理这个）
└── scripts/                    # 📁 辅助脚本目录
    ├── quick-start.sh          # ⚡ 快速启动脚本
    └── stop.sh                 # 🛑 快速停止脚本
```

## 🎯 主要使用方式

### **你只需要使用根目录的 `manage.sh` 脚本！**

```bash
# 在项目根目录运行
./start.sh
```

**所有配置都从 `.env` 文件读取，无硬编码！**

## 📁 脚本功能说明

### 1. **`manage.sh`** - 统一启动管理脚本 ⭐ 主要使用
- **位置**：项目根目录
- **功能**：完整的交互式菜单，支持所有操作
- **特点**：功能全面、操作友好、状态监控、配置驱动
- **适用**：日常开发、调试、服务管理

### 2. **`scripts/quick-start.sh`** - 快速启动脚本
- **位置**：scripts 目录
- **功能**：一键启动前后端服务
- **特点**：快速、简单、自动化、配置驱动
- **适用**：快速启动、演示、测试

### 3. **`scripts/stop.sh`** - 快速停止脚本
- **位置**：scripts 目录
- **功能**：一键停止所有服务
- **特点**：快速、安全、清理完整
- **适用**：快速停止、环境清理

## 🚀 使用方法

### **主要使用方式（推荐）**
```bash
# 在项目根目录运行
./start.sh
```

**功能菜单：**
- 🚀 启动前后端
- 🚀 单独启动后端/前端
- 🛑 停止所有服务/单独停止
- 🔄 重启所有服务/单独重启
- 📊 查看服务状态
- 📋 查看日志
- 🧹 清理环境
- 📖 帮助信息
- ⚡ 快速启动
- 🛑 快速停止

### **辅助使用方式**
```bash
# 快速启动（从根目录）
./scripts/quick-start.sh

# 快速停止（从根目录）
./scripts/stop.sh
```

## ⚙️ 配置管理

### **所有配置都在 `.env` 文件中！**

**你只需要编辑根目录的 `.env` 文件：**

```bash
# 服务器配置
SERVER_HOST=0.0.0.0
SERVER_PORT=8080

# 前端配置
VITE_DEV_PORT=3000
VITE_API_BASE_URL=http://localhost:8080/api
VITE_APP_TITLE=智能反向代理平台

# 数据库配置
DB_HOST=localhost
DB_USER=postgres
DB_PASSWORD=your_password
DB_NAME=proxy_enhancer

# JWT配置
JWT_SECRET=your-secret-key
```

### **配置特点**
- ✅ **无硬编码**：所有端口、地址都从 `.env` 读取
- ✅ **动态配置**：修改 `.env` 后重启服务即可生效
- ✅ **实时显示**：启动后显示正确的访问地址
- ✅ **环境隔离**：不同环境可以有不同的 `.env` 文件

## 🔧 脚本特性

### **智能检测**
- ✅ 自动检测 Go 环境
- ✅ 自动检测 Node.js 环境
- ✅ 自动检测配置文件
- ✅ 自动检测服务状态

### **配置驱动**
- 🔧 所有配置从 `.env` 文件读取
- 🔧 支持动态端口和地址配置
- 🔧 实时显示正确的访问地址
- 🔧 无硬编码值

### **安全管理**
- 🔒 PID 文件管理
- 🔒 优雅停止服务
- 🔒 强制停止保护
- 🔒 环境清理

### **日志管理**
- 📊 自动创建日志目录
- 📊 分离前后端日志
- 📊 实时日志监控
- 📊 日志文件管理

### **依赖管理**
- 📦 自动检测前端依赖
- 📦 自动安装缺失依赖
- 📦 支持 pnpm/npm

## 📋 使用步骤

### **首次使用**
1. 确保已安装 Go 1.21+ 和 Node.js
2. 在项目根目录创建 `.env` 配置文件
3. 运行 `./manage.sh` 进行交互式管理

### **日常使用**
1. **启动服务**：`./manage.sh` 选择启动选项
2. **管理服务**：`./manage.sh` 进行各种操作
3. **停止服务**：`./manage.sh` 选择停止选项

### **快速操作**
1. **快速启动**：`./scripts/quick-start.sh`
2. **快速停止**：`./scripts/stop.sh`

## ⚠️ 注意事项

### **环境要求**
- Go 1.21+ 环境
- Node.js 环境
- 项目根目录有 `.env` 配置文件

### **权限设置**
- 确保脚本有执行权限：`chmod +x manage.sh scripts/*.sh`
- 在项目根目录运行主脚本

### **配置文件**
- 所有配置都在根目录的 `.env` 文件中
- 修改配置后需要重启服务生效
- 脚本会自动读取最新配置

## 🎯 最佳实践

### **开发环境**
- 使用 `./manage.sh` 进行交互式管理
- 实时查看日志和状态
- 灵活启停单个服务

### **测试环境**
- 使用 `./scripts/quick-start.sh` 快速启动
- 使用 `./scripts/stop.sh` 快速停止
- 自动化测试流程

### **生产环境**
- 使用 `./manage.sh` 进行服务管理
- 监控服务状态和日志
- 优雅重启服务

## 🔍 故障排除

### **常见问题**
1. **权限错误**：`chmod +x manage.sh scripts/*.sh`
2. **端口占用**：检查 `.env` 中配置的端口
3. **依赖缺失**：脚本会自动检测和提示
4. **配置文件**：确保 `.env` 文件存在且格式正确

### **日志查看**
- 后端日志：`logs/backend.log`
- 前端日志：`logs/frontend.log`
- 实时监控：通过 `./manage.sh` 菜单

## 🎉 总结

### **新的脚本结构优势：**

1. **统一管理**：根目录只有一个主脚本 `manage.sh`
2. **配置驱动**：所有配置从 `.env` 文件读取，无硬编码
3. **功能完整**：交互式菜单支持所有操作
4. **结构清晰**：辅助脚本放在 `scripts` 目录
5. **易于维护**：修改配置只需编辑 `.env` 文件

### **使用建议：**

- **主要使用**：`./manage.sh` 进行所有操作
- **快速操作**：`./scripts/quick-start.sh` 和 `./scripts/stop.sh`
- **配置管理**：只编辑根目录的 `.env` 文件

**现在你拥有了一个完全配置驱动、无硬编码的统一启动管理系统！**
